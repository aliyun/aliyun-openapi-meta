{
  "name": "CreateLifecycleHook",
  "protocol": "HTTP|HTTPS",
  "method": "GET|POST",
  "pathPattern": "",
  "parameters": [
    {
      "name": "DefaultResult",
      "description": "等待状态结束后的下一步动作。取值范围：\n\n- CONTINUE：继续响应弹性扩张活动或者继续响应弹性收缩活动。\n- ABANDON：直接释放弹性扩张活动创建出来的ECS实例或者直接将弹性收缩活动中的ECS实例从伸缩组移除。\n- ROLLBACK：针对弹性收缩活动，会拒绝释放ECS实例，进行回滚；针对弹性扩张活动，会直接释放创建出来的ECS实例，效果同`ABANDON`一样。\n\n当伸缩组发生弹性收缩活动（SCALE_IN）并触发多个生命周期挂钩时，如果一个生命周期挂钩的`DefaultResult`取值为`ABANDON`或`ROLLBACK`，且该挂钩等待状态结束时，会提前将其他生命周期挂钩对应的等待状态提前结束。其他情况下，下一步动作均以最后一个结束等待状态的下一步动作为准。\n\n默认值：CONTINUE。",
      "position": "Query",
      "type": "String",
      "required": false
    },
    {
      "name": "HeartbeatTimeout",
      "description": "生命周期挂钩为伸缩组活动设置的等待时间，等待状态超时后会执行下一步动作。取值范围：30~21600，单位：秒。\n\n创建了生命周期挂钩后，您可以调用[RecordLifecycleActionHeartbeat](~~73846~~)延长ECS实例的等待时间，也可以调用[CompleteLifecycleAction](~~73847~~)提前结束伸缩活动的等待状态。\n\n默认值：600。",
      "position": "Query",
      "type": "Integer",
      "required": false
    },
    {
      "name": "LifecycleHookName",
      "description": "生命周期挂钩的名称。不能与当前伸缩组其他生命周期挂钩重名，长度为2~64个英文或中文字符，以数字、大小写字母或中文开头，可包含数字、下划线（_）、短划线（-）和半角句号（.）。\n\n默认值为LifecycleHookId的值。",
      "position": "Query",
      "type": "String",
      "required": false
    },
    {
      "name": "LifecycleTransition",
      "description": "生命周期挂钩适用的伸缩活动类型，取值范围：\n\n- SCALE_OUT：伸缩组弹性扩张活动。\n- SCALE_IN：伸缩组弹性收缩活动。",
      "position": "Query",
      "type": "String",
      "required": true
    },
    {
      "name": "NotificationArn",
      "description": "生命周期挂钩通知对象标识符，不设置本参数表示不发送通知，设置本参数时支持以下通知方式：\n\n- 消息服务MNS队列，参数取值格式：acs:mns:{region-id}:{account-id}:queue/{queuename}。\n- 消息服务MNS主题，参数取值格式：acs:mns:{region-id}:{account-id}:topic/{topicname}。\n- 运维编排OOS模板，参数取值格式：acs:oos:{region-id}:{account-id}:template/{templatename}。\n\n参数格式中的变量含义如下：\n\n- region-id：伸缩组所在的地域的ID。\n- account-id：阿里云账号ID，不支持RAM用户的账号ID。\n- queuename：MNS队列的名称。\n- topicname：MNS主题的名称。\n- templatename：OOS模板的名称。",
      "position": "Query",
      "type": "String",
      "required": false
    },
    {
      "name": "NotificationMetadata",
      "description": "生命周期挂钩暂停伸缩活动时推送给`NotificationArn`（通知对象）的通知信息，便于管理和标记不同类别的通知信息。必须同时指定`NotificationArn`。参数长度不能超过4096个字符。\n\n如果`NotificationArn`指定为OOS模板，包括公共模板或者自定义模板，则`NotificationMetadata`必须指定为JSON字符串，且与OOS模板的参数相符。\n\n例如，`{\"dbInstanceId\": \"dds-bp17661e0135****\",  \"modifyMode\": \"Append\"}`，`dbInstanceId`和`modifyMode`为OOS模板中已定义的参数。OOS模板的部分参数有默认值，`NotificationMetadata`必须指定无默认值的参数，指定有默认值的参数时会覆盖原默认值，但以下参数请保持默认值，用于在伸缩活动运行时获取相关信息：\n\n- regionId：伸缩活动执行的地域，默认为${regionId}。\n\n- instanceIds：伸缩活动关联的实例列表，默认为${instanceIds}。\n\n- lifecycleHookId：生命周期挂钩ID，默认为${lifecycleHookId}。\n\n- lifecycleActionToken：伸缩活动的等待状态标识符，用于提前结束当前的挂起活动，默认为${lifecycleActionToken}。\n\n- scalingGroupId：伸缩活动所属的伸缩组ID，默认为${scalingGroupId}。\n\n- lifecycleActionResult：生命周期挂钩等待状态结束后的下一步动作，用于在OOS模板执行失败时提前结束当前的挂起活动，当`DefaultResult`为`ROLLBACK`时，参数值默认为`ROLLBACK`，其余情况默认为`ABANDON`。\n>- 您可以根据需要设置`lifecycleActionResult`的值来覆盖当前默认值，取值范围为ABANDON、CONTINUE、ROLLBACK、${lifecycleActionResult}。其中，`${lifecycleActionResult}`表示lifecycleActionResult的值和DefaultResult保持一致。\n- 您可以在[OOS控制台](https://oos.console.aliyun.com/)获取对应模板的参数的详细信息。",
      "position": "Query",
      "type": "String",
      "required": false
    },
    {
      "name": "ScalingGroupId",
      "description": "伸缩组的ID。",
      "position": "Query",
      "type": "String",
      "required": true
    }
  ]
}