{
  "name": "QueryCollectionData",
  "deprecated": false,
  "protocol": "HTTP|HTTPS",
  "method": "GET|POST",
  "pathPattern": "",
  "parameters": [
    {
      "name": "Collection",
      "description": "集合名。\n\n> 您可以通过[ListCollections](~~2401503~~)接口查看列表。",
      "position": "Query",
      "type": "String",
      "required": true
    },
    {
      "name": "Content",
      "description": "用于全文检索的内容。即此值为空时，仅使用向量检索；不为空时，使用向量和全文双路检索。\n\n> 和Vector参数不能同时为空。",
      "position": "Query",
      "type": "String",
      "required": false
    },
    {
      "name": "DBInstanceId",
      "description": "实例ID。\n\n> 您可以调用[DescribeDBInstances](~~86911~~)接口查看目标地域下所有的AnalyticDB PostgreSQL实例的详情，包括实例ID。",
      "position": "Query",
      "type": "String",
      "required": false
    },
    {
      "name": "Filter",
      "description": "要查询的数据的过滤条件，格式为SQL的WHERE格式。是一个返回布尔值（真或假）的表达式，条件可以是简单的比较运算符，如等于(=)、不等于(<>或!=)、大于(>), 小于(<)、大于等于(>=)、小于等于(<=)，也可以是逻辑运算符（AND, OR, NOT）组合的更复杂的表达式，以及使用IN、BETWEEN、LIKE等关键字的条件。\n\n> \n> - 详细语法可参考：https://www.postgresqltutorial.com/postgresql-tutorial/postgresql-where/",
      "position": "Body",
      "type": "String",
      "required": false
    },
    {
      "name": "HybridSearch",
      "description": "双路召回算法，默认为空(即直接将向量和全文的分数比较并排序)。\n\n可选值：\n\n- RRF：倒数排序融合(Reciprocal rank fusion)，有一个参数k控制融合效果，详见HybridSearchArgs配置；\n- Weight：比重排序，采用一个参数alpha控制向量和全文的分数比重，然后再排序，参数详见HybridSearchArgs配置；\n- Cascaded：先全文检索再在其基础上进行向量检索；",
      "position": "Query",
      "type": "String",
      "required": false
    },
    {
      "name": "HybridSearchArgs",
      "description": "双路召回的算法参数。目前支持RRF和Weight两种：\n\n- RRF：指定计算分数的算法的`1/(k+rank_i)`中的k常数，范围大于1的正整数，格式为：\n```\n{ \n   \"RRF\": {\n    \"k\": 60\n   }\n}\n```\n\n- Weight: 计算公式`alpha * vector_score + (1-alpha) * text_score`，参数alpha表示向量和全文的检索分数比重，范围为0～1，其中0表示只全文，1表示只向量：\n```\n{ \n   \"Weight\": {\n    \"alpha\": 0.5\n   }\n}\n```",
      "position": "Query",
      "type": "String",
      "required": false
    },
    {
      "name": "IncludeMetadataFields",
      "description": "默认为空，表示要返回的metadata字段，多个字段用逗号分隔。",
      "position": "Query",
      "type": "String",
      "required": false
    },
    {
      "name": "IncludeSparseValues",
      "description": "",
      "position": "Query",
      "type": "Boolean",
      "required": false
    },
    {
      "name": "IncludeValues",
      "description": "是否返回向量数据。取值说明：\n- **true**：返回向量数据。\n- **false**：不返回向量数据，用于全文检索场景。",
      "position": "Query",
      "type": "Boolean",
      "required": false
    },
    {
      "name": "Metrics",
      "description": "检索时的相似度算法。取值说明：\n- **l2**：欧氏距离。\n- **ip**：点积（内积）距离。\n- **cosine**：余弦相似度。\n\n> 此值为空时，则使用构建索引时指定的算法。",
      "position": "Query",
      "type": "String",
      "required": false
    },
    {
      "name": "Namespace",
      "description": "命名空间。\n\n> 您可以通过[ListNamespaces](~~2401502~~)查看列表。",
      "position": "Query",
      "type": "String",
      "required": false
    },
    {
      "name": "NamespacePassword",
      "description": "命名空间对应的密码。",
      "position": "Query",
      "type": "String",
      "required": true
    },
    {
      "name": "Offset",
      "description": "默认为空，表示分页查询时的检索起点。不支持双路召回场景。\n\n范围必须>=0。当此值不为空时，会返回Total表示总的命中数。此参数配合TopK使用，比如要分页20检索chunk_id 0~44的chunks，则要请求3次：\n- Offset=0,TopK=20返回chunk_id 0~19\n- Offset=20,TopK=20返回chunk_id 20~39\n- Offset=30,TopK=20返回chunk_id 40~44",
      "position": "Query",
      "type": "Integer",
      "required": false
    },
    {
      "name": "OrderBy",
      "description": "默认为空，表示排序的依据字段。不支持双路召回场景。\n\n字段必须属于metadata或表里的默认字段比如id，格式支持：\n- 单个字段，如chunk_id；\n- 多个字段，用逗号连接，如block_id, chunk_id；\n- 支持反序，如: block_id DESC, chunk_id DESC；",
      "position": "Query",
      "type": "String",
      "required": false
    },
    {
      "name": "RegionId",
      "description": "实例所在地域ID。",
      "position": "Query",
      "type": "String",
      "required": true
    },
    {
      "name": "RelationalTableFilter",
      "description": "使用另外一张关系表实现向量数据过滤（类似Join的功能）。\n\n> 关系表的数据可以通过设置IncludeMetadataFields参数返回。比如rds_table_name.id表示返回关系表的id字段。",
      "position": "Query",
      "type": "String",
      "required": false
    },
    {
      "name": "SparseVector",
      "description": "稀疏向量数据列表。",
      "position": "Query",
      "type": "String",
      "required": false
    },
    {
      "name": "TopK",
      "description": "设置返回top结果数量。",
      "position": "Query",
      "type": "Long",
      "required": true
    },
    {
      "name": "Vector",
      "description": "向量数据，长度和[CreateCollection](~~2401497~~)接口的维度一致。\n> \n> - 当 SparseVector 为空时，只返回稠密向量检索结果。\n> - 当 Vector和SparseVector 均为空时，只返回全文检索结果。",
      "position": "Query",
      "type": "Json",
      "required": false
    },
    {
      "name": "WorkspaceId",
      "description": "多数据库实例组成的Workspace的Id。此参数和DBInstanceId参数不能同时为空，当和DBInstanceId同时指定时以此参数为准。",
      "position": "Query",
      "type": "String",
      "required": false
    }
  ]
}