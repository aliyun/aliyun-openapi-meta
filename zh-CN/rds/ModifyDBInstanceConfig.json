{
  "name": "ModifyDBInstanceConfig",
  "deprecated": false,
  "protocol": "HTTP|HTTPS",
  "method": "GET|POST",
  "pathPattern": "",
  "parameters": [
    {
      "name": "ClientToken",
      "description": "用于保证请求的幂等性，防止重复提交请求。由客户端生成该参数值，要保证在不同请求间唯一，最大值不超过64个ASCII字符，且该参数值中不能包含非ASCII字符。",
      "position": "Query",
      "type": "String",
      "required": false
    },
    {
      "name": "ConfigName",
      "description": "待修改的配置项名称，配合ConfigValue使用。\n<details>\n<summary>RDS PostgreSQL配置项</summary>\n\n- **pgbouncer**：修改PgBouncer功能。\n- **encryptionKey**：修改云盘加密功能。\n- **duckdb_create_databases**: 批量配置主实例数据库为DuckDB列存库。\n- **duckdb_prepare_dependency**: 一键配置主实例使其参数、内核小版本满足创建DuckDB分析实例的[前提条件](~~2977241~~)。如果主实例已创建了只读实例，会将只读实例同步修改。\n- **enable_db_visible_by_connect_rls**: 实例开启 CONNECT RLS 控制数据库可见性。\n- **set_db_visible_by_connect_rls**: 数据库开启 CONNECT RLS 控制数据库可见性，只有实例开启 CONNECT RLS 后才可调用。\n\n</details>\n\n<details>\n<summary>RDS SQL Server配置项</summary>\n\n<props=\"intl\">\n\n- **clear_errorlog**：清理错误日志。\n- **encryptionKey**：修改云盘加密功能。Serverless实例和共享规格实例暂不支持开启该功能。\n\n</props>\n\n<props=\"china\">\n\n\n- **backup_recovery_model**：开启简单恢复模式功能。仅基础系列实例支持开启，**该功能开启后不支持关闭**。\n- **clear_errorlog**：清理错误日志。\n- **encryptionKey**：修改云盘加密功能。Serverless实例和共享规格实例暂不支持开启该功能。\n</props>\n\n</details>",
      "position": "Query",
      "type": "String",
      "required": true
    },
    {
      "name": "ConfigValue",
      "description": "待修改配置项的取值，配合ConfigName使用。\n\n<details>\n<summary>RDS PostgreSQL配置项取值</summary>\n\n- PgBouncer功能：**true**（开启）、**false**（关闭）。\n- 云盘加密功能：\n  - **ServiceKey**：使用由阿里云自动生成的密钥，即使用RDS托管的服务密钥（Default Service CMK）开启云盘加密。\n  - **<密钥>**：使用自定义密钥开启云盘加密，或者更换当前密钥。例如`494c98ce-f2b5-48ab-96ab-36c986b6****`。\n  - **disabled**：关闭云盘加密。\n- 一键修复创建DuckDB分析实例所需的前提条件: **duckdb_prepare_dependency**\n- 批量设置主实例数据库为DuckDB列存库，JSON字符串，例如`{\"dbNames\": \"db1,db2,db3\", \"accountName\": \"yourSuperAccountName\"}`，其中：\n  - **dbNames**：要转为DuckDB列存库的数据库名称。多个数据库之间使用英文逗号（,）分隔。\n  - **accountName**：高权限账号。只需配置一个高权限账号。\n- 实例开启 CONNECT RLS 控制数据库可见性：**true** 开启。\n- 数据库开启 CONNECT RLS 控制数据库可见性：受 CONNECT RLS 管控**数据库名称**。多个数据库之间使用英文逗号（,）分隔。如 **testdb1,testdb2**。客户连接开启 CONNECT RLS 的数据库会根据是否对其他数据库有 CONNECT 权限而正确展示数据库列表。\n</details>\n<details>\n<summary>RDS SQL Server配置项取值</summary>\n\n<props=\"intl\">\n\n- 错误日志清理功能：**1**（确认清理）。\n- 云盘加密功能（**该功能开启后无法关闭**）：\n  - **serviceKey**：使用由阿里云自动生成的密钥，即使用RDS托管的服务密钥（Default Service CMK）开启云盘加密。\n  - **<密钥>**：使用自定义密钥开启云盘加密，或者更换当前密钥。例如`494c98ce-f2b5-48ab-96ab-36c986b6****`。\n\n</props>\n\n\n<props=\"china\">\n\n- 简单恢复功能：**simple**（开启简单恢复）。\n- 错误日志清理功能：**1**（确认清理）。\n- 云盘加密功能（**该功能开启后无法关闭**）：\n  - **serviceKey**：使用由阿里云自动生成的密钥，即使用RDS托管的服务密钥（Default Service CMK）开启云盘加密。\n  - **<密钥>**：使用自定义密钥开启云盘加密，或者更换当前密钥。例如`494c98ce-f2b5-48ab-96ab-36c986b6****`。\n\n</props>\n\n</details>",
      "position": "Query",
      "type": "String",
      "required": true
    },
    {
      "name": "DBInstanceId",
      "description": "实例ID。可调用DescribeDBInstances获取。",
      "position": "Query",
      "type": "String",
      "required": true
    },
    {
      "name": "ResourceGroupId",
      "description": "资源组ID。可调用DescribeDBInstanceAttribute获取。",
      "position": "Query",
      "type": "String",
      "required": false
    },
    {
      "name": "SwitchTime",
      "description": "指定执行修改的时间。建议在业务低峰期执行变配。格式：<i>yyyy-MM-dd</i>T<i>HH:mm:ss</i>Z（UTC时间）。",
      "position": "Query",
      "type": "String",
      "required": false
    },
    {
      "name": "SwitchTimeMode",
      "description": "切换时间。取值：\n- **Immediate**：立即生效。\n- **MaintainTime**：在可运维时间段内生效，可调用ModifyDBInstanceMaintainTime接口修改可运维时间段。",
      "position": "Query",
      "type": "String",
      "required": false
    }
  ]
}