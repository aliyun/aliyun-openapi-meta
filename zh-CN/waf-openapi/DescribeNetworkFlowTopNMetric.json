{
  "name": "DescribeNetworkFlowTopNMetric",
  "protocol": "HTTPS",
  "method": "GET|POST",
  "pathPattern": "",
  "parameters": [
    {
      "name": "Filter",
      "description": "查询过滤条件，多个过滤条件之间是逻辑与的关系。",
      "position": "Query",
      "type": "String",
      "required": true
    },
    {
      "name": "InstanceId",
      "description": "WAF实例ID。\n\n> 您可以通过调用[DescribeInstance](~~433756~~)接口查看当前WAF实例ID。",
      "position": "Query",
      "type": "String",
      "required": true
    },
    {
      "name": "Limit",
      "description": "控制统计数据按照降序排序后返回数据条数，最大值为10。",
      "position": "Query",
      "type": "Long",
      "required": true
    },
    {
      "name": "Metric",
      "description": "用于区分返回的数据内容，不同的Metric对应不同的数据内容，该接口支持的Metric如下：\n\n- real_client_ip，当前用户所有经过waf的请求，按照请求源IP聚合统计并降序排序后，返回前N条数据。\n- http_user_agent，当前用户所有经过waf的请求，按照请求的user-agent聚合统计并降序排序后，返回前N条数据。\n- request_path，当前用户所有经过waf的请求，按照请求的URL聚合统计并降序排序后，返回前N条数据。\n- matched_host_by_total_requests，返回当前用户请求数最大的N个防护对象以及对应的请求数。\n- matched_host_by_qps，返回当前用户QPS最大的N个防护对象以及对应的QPS数据\n- matched_host_by_status，使用该Metric时需要在Filter的Conditions字段指定status，waf返回的HTTP响应码等于Conditions中指定的status的数据按照防护对象聚合统计并排序后，返回前N条数据。指定status的格式如下：<br>\n{\"Key\":\"status\",\"OpValue\":\"eq\",\"Values\":\"200\"}\n- matched_host_by_upstream_status，使用该Metric时需要在Filter的Conditions字段指定upstream_status，源站返回的HTTP响应码等于Conditions中指定的upstream_status的数据按照防护对象聚合统计并排序后，返回前N条数据。指定upstream_status的格式如下：<br>\n{\"Key\":\"upstream_status\",\"OpValue\":\"eq\",\"Values\":\"200\"}",
      "position": "Query",
      "type": "String",
      "required": true
    },
    {
      "name": "RegionId",
      "description": "WAF实例所属地域。取值：\n\n- **cn-hangzhou**：表示中国内地。\n- **ap-southeast-1**：表示非中国内地。",
      "position": "Query",
      "type": "String",
      "required": false
    },
    {
      "name": "ResourceManagerResourceGroupId",
      "description": "阿里云资源组ID。",
      "position": "Query",
      "type": "String",
      "required": false
    }
  ]
}